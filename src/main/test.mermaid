flowchart TD
%% Authentification
    START([ðŸ” Connexion Utilisateur]) --> VALIDATE{ðŸ” Validation JWT}

%% Routes selon le rÃ´le
VALIDATE -->|ADMIN| ADMIN[ðŸ‘‘ Dashboard Admin]
VALIDATE -->|CLIENT| CLIENT[ðŸª Dashboard Client]

%% Dashboard Admin
ADMIN --> MANAGE_USERS[ðŸ‘¥ Gestion Utilisateurs]
ADMIN --> SYSTEM_MONITOR[ðŸ“Š Supervision SystÃ¨me]

%% Dashboard Client - Modules principaux
CLIENT --> PRODUCTS[ðŸ“¦ Gestion Produits]
CLIENT --> STOCK[ðŸ“‹ Gestion Stock]
CLIENT --> NEW_SALE[ðŸ›’ Nouvelle Vente]
CLIENT --> REPORTS[ðŸ“ˆ Rapports & Analytics]
CLIENT --> EMAILS[ðŸ“§ Emails Clients]

%% Gestion Produits
PRODUCTS --> PROD_CRUD[CRUD Produits & CatÃ©gories]

%% Gestion Stock
STOCK --> STOCK_CRUD[CRUD Stock Items]
STOCK --> SUPPLIERS[ðŸšš Gestion Fournisseurs]
STOCK --> ALERTS[âš ï¸ Alertes Stock/Expiration]

%% Processus de Vente Principal
NEW_SALE --> SCAN[ðŸ“± Scan Code-Barres]
SCAN --> STOCK_CHECK{ðŸ“Š VÃ©rification Stock}

STOCK_CHECK -->|Stock OK| CALC[ðŸ’° Calcul Total]
STOCK_CHECK -->|Stock Insuffisant| SCAN

CALC --> PAYMENT[ðŸ’³ Traitement Paiement]
PAYMENT --> UPDATE_STOCK[ðŸ“‰ Mise Ã  Jour Stock]
UPDATE_STOCK --> RECEIPT[ðŸ§¾ GÃ©nÃ©ration Ticket]
RECEIPT --> SALE_EVENT[âœ… Vente FinalisÃ©e]

%% Services Email
EMAILS --> EMAIL_REMINDER[ðŸ“® Rappels Paiement]
EMAILS --> EMAIL_CANCEL[ðŸ“® Confirmations RÃ©siliation]
EMAILS --> EMAIL_REGISTER[ðŸ“® PrÃ©-inscriptions]

%% Rapports
REPORTS --> DAILY_SALES[ðŸ“Š Ventes du Jour]
REPORTS --> HISTORY[ðŸ“œ Historique Ventes]
REPORTS --> TOP_PRODUCTS[ðŸ† Produits Populaires]

%% Fin de session
SALE_EVENT --> END([ðŸ”š Fin de Session])
MANAGE_USERS --> END
SYSTEM_MONITOR --> END
PROD_CRUD --> CLIENT
STOCK_CRUD --> CLIENT
SUPPLIERS --> CLIENT
ALERTS --> CLIENT
EMAIL_REMINDER --> CLIENT
EMAIL_CANCEL --> CLIENT
EMAIL_REGISTER --> CLIENT
DAILY_SALES --> CLIENT
HISTORY --> CLIENT
TOP_PRODUCTS --> CLIENT

%% Styles des groupes
classDef authGroup fill:#ff6b6b,stroke:#fff,stroke-width:2px,color:#fff
classDef mgmtGroup fill:#4ecdc4,stroke:#fff,stroke-width:2px,color:#fff
classDef salesGroup fill:#45b7d1,stroke:#fff,stroke-width:2px,color:#fff
classDef servicesGroup fill:#96ceb4,stroke:#fff,stroke-width:2px,color:#fff

%% Application des styles
class START,VALIDATE authGroup
class ADMIN,CLIENT,PRODUCTS,STOCK,PROD_CRUD,STOCK_CRUD,SUPPLIERS,ALERTS mgmtGroup
class NEW_SALE,SCAN,STOCK_CHECK,CALC,PAYMENT,UPDATE_STOCK,RECEIPT,SALE_EVENT salesGroup
class EMAILS,REPORTS,EMAIL_REMINDER,EMAIL_CANCEL,EMAIL_REGISTER,DAILY_SALES,HISTORY,TOP_PRODUCTS servicesGroup